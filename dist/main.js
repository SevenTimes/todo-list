(()=>{"use strict";function e(){localStorage.setItem("projectList",JSON.stringify(c))}class t{constructor(e){this.title=e,this.tasks=[]}}function n(){const t=document.getElementById("project-list");let n;document.querySelector(".active")&&(n=document.querySelector(".active").id),t.innerHTML="",c.forEach(((e,n)=>{const c=document.createElement("button");c.classList.add("project"),c.innerText=e.title,c.id=`data-index-${n}`,t.appendChild(c)})),function(){let e=document.querySelectorAll(".project");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(t=>{for(let t=0;t<e.length;t++)e[t].classList.remove("active");t.target.className+=" active";let n=t.target.id;return s=c[`${n.slice(11)}`],d(),s}))}(),void 0!==n&&(document.getElementById(n).className+=" active"),e()}let c=[];if(localStorage.getItem("projectList"))c=JSON.parse(localStorage.getItem("projectList"));else{const e=new t("Default");c.push(e)}let s=c[0];n(),d(),document.querySelector(".project").className+=" active";class o{constructor(e,t,n,c){this.title=e,this.description=t,this.dueDate=n,this.priority=c,this.isCompleted=!1}}function d(){const t=document.getElementById("task-list");t.innerHTML="",s.tasks.length>0&&s.tasks.forEach(((e,n)=>{const c=document.createElement("div");c.classList.add("task",`${e.priority}`);const o=document.createElement("h1");o.innerText=e.title,c.appendChild(o);const i=document.createElement("p");i.innerText=e.description,c.appendChild(i);const l=document.createElement("div"),a=document.createElement("span");a.innerText=e.dueDate,l.appendChild(a);const r=document.createElement("button");r.innerText="DEL",r.addEventListener("click",(()=>{s.tasks.splice(n,1),d()})),l.appendChild(r);const m=document.createElement("input");m.setAttribute("type","checkbox"),e.isCompleted&&(m.checked=!0),m.addEventListener("change",(t=>{t.target.checked?e.isCompleted=!0:e.isCompleted=!1,d()})),l.appendChild(m),e.isCompleted?c.className+=" completed":c.classList.remove("completed"),c.appendChild(l),t.appendChild(c)})),e()}const i=document.getElementById("title"),l=document.getElementById("description"),a=document.getElementById("dueDate");document.getElementById("form").addEventListener("submit",(function(e){const t=document.querySelector('input[name="priority"]:checked').value,n=new o(i.value,l.value,a.value,t);s.tasks.push(n),document.getElementById("add-task-modal").style.display="none",i.value="",l.value="",a.value="",e.preventDefault(),d()})),document.getElementById("add-project").addEventListener("click",(()=>{const e=prompt("Enter project name","New project"),s=new t(e);c.push(s),n()}))})();