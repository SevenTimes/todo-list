(()=>{"use strict";function e(){localStorage.setItem("projectList",JSON.stringify(c))}class t{constructor(e){this.title=e,this.tasks=[]}}function n(){const t=document.getElementById("project-list");let i;document.querySelector(".active")&&(i=document.querySelector(".active").id),t.innerHTML="",c.forEach(((e,s)=>{const i=document.createElement("div");if(i.classList.add("project"),i.innerText=e.title,i.id=`data-index-${s}`,0!==s){const e=document.createElement("button");e.classList.add("delete"),e.innerText="DEL",e.addEventListener("click",(e=>{e.target.parentNode.classList.contains("active")&&(e.target.parentNode.classList.remove("active"),e.target.parentNode.previousElementSibling.className+=" active");const t=e.target.parentNode.id.slice(11);c.splice(t,1),n()})),i.appendChild(e)}t.appendChild(i)})),function(){let e=document.querySelectorAll(".project");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(t=>{if(t.target===t.currentTarget){for(let t=0;t<e.length;t++)e[t].classList.remove("active");t.target.className+=" active";let n=t.target.id;return s=c[`${n.slice(11)}`],a(),s}}))}(),void 0!==i&&(document.getElementById(i).className+=" active"),e()}let c=[];if(localStorage.getItem("projectList"))c=JSON.parse(localStorage.getItem("projectList"));else{const e=new t("Default");c.push(e)}let s=c[0];n(),a(),document.querySelector(".project").className+=" active";class i{constructor(e,t,n,c){this.title=e,this.description=t,this.dueDate=n,this.priority=c,this.isCompleted=!1}}function a(){const t=document.getElementById("task-list");t.innerHTML="",s.tasks.length>0&&s.tasks.forEach(((e,n)=>{const c=document.createElement("div");c.classList.add("task",`${e.priority}`);const i=document.createElement("h1");i.innerText=e.title,c.appendChild(i);const d=document.createElement("p");d.innerText=e.description,c.appendChild(d);const l=document.createElement("div"),o=document.createElement("span");o.innerText=e.dueDate,l.appendChild(o);const r=document.createElement("button");r.innerText="DEL",r.addEventListener("click",(()=>{s.tasks.splice(n,1),a()})),l.appendChild(r);const m=document.createElement("input");m.setAttribute("type","checkbox"),e.isCompleted&&(m.checked=!0),m.addEventListener("change",(t=>{t.target.checked?e.isCompleted=!0:e.isCompleted=!1,a()})),l.appendChild(m),e.isCompleted?c.className+=" completed":c.classList.remove("completed"),c.appendChild(l),t.appendChild(c)})),e()}const d=document.getElementById("title"),l=document.getElementById("description"),o=document.getElementById("dueDate");document.getElementById("form").addEventListener("submit",(function(e){const t=document.querySelector('input[name="priority"]:checked').value,n=new i(d.value,l.value,o.value,t);s.tasks.push(n),document.getElementById("add-task-modal").style.display="none",d.value="",l.value="",o.value="",e.preventDefault(),a()})),document.getElementById("add-project").addEventListener("click",(()=>{const e=prompt("Enter project name","New project"),s=new t(e);c.push(s),n()}))})();